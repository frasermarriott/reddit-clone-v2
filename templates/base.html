<html>
<head>
  <title>{% block pageTitle %} {% endblock %} - reddit clone</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='img/icons/favicon.ico') }}">

  <!-- Fonts -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css?family=Jockey+One" rel="stylesheet">

  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/fonts/glyphicons-halflings-regular.woff2" rel="application/font-woff2">

  <!-- Material Design fonts -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Bootstrap css -->
  <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">

  <!-- Bootstrap Material Design -->
  <link href="{{ url_for('static', filename='css/bootstrap-material-design.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/ripples.min.css') }}" rel="stylesheet">

  <!-- Dropdown.js -->
  <link href="//cdn.rawgit.com/FezVrasta/dropdown.js/master/jquery.dropdown.css" rel="stylesheet">

  <!-- Style -->
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/sidebar.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/jquery-ui.css') }}" rel="stylesheet">


  <!-- jQuery -->
  <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>


  <!-- Js -->
  <script src="{{ url_for('static', filename='js/custom.js') }}"></script>



</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand navLogo" href="{{ url_for('root') }}"><img src="{{ url_for('static', filename='img/icons/logo.png') }}" id="logo-img">reddit clone</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li {% if request.path == '/' %}class="active"{% endif %}><a href="{{
        url_for('root') }}"><!--<span class="glyphicon glyphicon-globe"></span>--> frontpage<span class="sr-only">(current)</span></a></li>
      
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"
          role="button" aria-haspopup="true" aria-expanded="false"><!--<span
          class="glyphicon glyphicon-list"></span>--> subreddits<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="{{ url_for('subreddit_list') }}"><span
            class="glyphicon glyphicon-list-alt"></span> Subreddit list</a></li>
            <li><a href="{{ url_for('subreddit_creation_form') }}"><span
            class="glyphicon glyphicon-wrench"></span> Create a subreddit</a></li>
          </ul>
        </li>
        
      </ul>
      <!--
      <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      -->
      <ul class="nav navbar-nav navbar-right">

        {% if session['username'] %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"
          role="button" aria-haspopup="true" aria-expanded="false"><span
          class="glyphicon glyphicon-user"></span> {{ session['username'] }} <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="{{ url_for('user',user=session['username']) }}">My profile</a></li>
            <!--<li><a href="#">#</a></li>-->
            <li role="separator" class="divider"></li>
            <li><a href="{{ url_for('logout') }}"><span class="glyphicon
            glyphicon-log-out"></span> Logout</a></li>
          </ul>
        </li>
        {% else %}
        <li><a href="{{ url_for('login') }}"><span class="glyphicon
        glyphicon-log-in"></span> Login</a></li>
        {% endif %}
        
        

      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">

  {% block body %}
  {% endblock %}


  
    <!-- login modal -->
    <div class="modal fade" id="vote-login" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            Please log in to vote
          </div>
          <div class="modal-body">
            <form action="{{ url_for('login') }}" method="POST">
              <div class="form-group">
                <label for="username">Username</label>
                <input type="text" maxlength="15" name="username" id="username" class="form-control nospace" placeholder="Username" required autofocus>
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input type="password" maxlength="50" name="password" id="password" class="form-control" placeholder="Password" required>
              </div>
              <button type="submit" class="btn btn-primary">Login</button>
              <a href="{{ url_for('register') }}" class="btn btn-default">Sign up</a>
            </form>
          </div>
        </div>
      </div>
    </div>







  </div><!--/main container-->

  

  <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

  <!-- Material Design for Bootstrap -->
  <script src="{{ url_for('static', filename='js/material.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ripples.min.js') }}"></script>
  <script>
    $.material.init();
  </script>

  <!-- Dropdown.js -->
  <script src="https://cdn.rawgit.com/FezVrasta/dropdown.js/master/jquery.dropdown.js"></script>
  <script>
    $("#dropdown-menu select").dropdown();
  </script>

                <script type="text/javascript">
                    $(function() {
                        $('.upvote, .prev-upvoted').click( function() {
                            $.ajax({
                                url: "{{ url_for('vote_post') }}",
                                method: "POST",
                                data: {
                                    data: $(this).nextAll('.votes-number').text(),
                                    post_id: $(this).siblings('input').val(),
                                    upvoted_by_user: $(this).siblings('input.upvoted-by-user').val(),
                                    downvoted_by_user: 'null'
                                },
                                success: function(data) {
                                    console.log(data);
                                }
                            });
                        });
                            

                        $('.downvote, .prev-downvoted').click( function() {
                            $.ajax({
                                url: "{{ url_for('vote_post') }}",
                                method: "POST",
                                data: {
                                    data: $(this).prevAll('.votes-number').text(),
                                    post_id: $(this).siblings('input').val(),
                                    upvoted_by_user: 'null',
                                    downvoted_by_user: $(this).siblings('input.downvoted-by-user').val()
                                },
                                success: function(data) {
                                    console.log(data);
                                }
                            });
                        });

                        

                    });
                </script>



</body>
</html>
